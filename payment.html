<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payment Cart</title>
  <link rel="icon" href="logod.jpg">
  <link rel="stylesheet" href="style.css">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; font-family: 'Inter', system-ui, sans-serif; margin:0; padding:0; }
    body { background:#fff; color:#111; }

    /* Layout */
    .checkout { max-width: 1100px; margin: 120px auto; padding: 0 20px; display:grid; grid-template-columns:1fr 1fr; gap:60px; }
    @media (max-width:900px){ .checkout { grid-template-columns:1fr; margin-top:100px; } }

    /* Left */
    .checkout-left h2{ margin-bottom:24px; }
    .form-group{ margin-bottom:20px; }
    label{ display:block; font-size:14px; margin-bottom:6px; color:#444; }
    input[type="text"], input[type="email"]{ width:100%; padding:14px; border-radius:10px; border:1px solid #ddd; font-size:15px; }
    input:focus{ outline:none; border-color:#111; }

    /* Payment */
    .payment-methods{ margin-top:30px; }
    .payment-methods h3{ margin-bottom:12px; }
    .payment-option{ border:1px solid #ddd; border-radius:12px; padding:14px; margin-bottom:12px; cursor:pointer; display:flex; align-items:center; }
    .payment-option input{ display:none; }
    .payment-option.active{ border-color:#111; }

    /* Pay Button */
    .pay-btn{ width:100%; margin-top:30px; padding:16px; font-size:16px; border-radius:14px; border:none; background:#ccc; color:#fff; cursor:not-allowed; transition:0.25s ease; }
    .pay-btn.active{ background:#111; cursor:pointer; }

    /* Right */
    .checkout-right{ border:1px solid #eee; border-radius:16px; padding:24px; }
    .checkout-right h3{ margin-bottom:20px; }
    .order-item{ display:flex; justify-content:space-between; margin-bottom:12px; font-size:14px; }
    .order-total{ border-top:1px solid #eee; margin-top:20px; padding-top:16px; font-weight:600; display:flex; justify-content:space-between; }

    /* Thank You */
    .thankyou{ position:fixed; inset:0; background:rgba(255,255,255,0.95); display:flex; align-items:center; justify-content:center; opacity:0; pointer-events:none; transition:opacity 0.4s ease; z-index:9999; }
    .thankyou.active{ opacity:1; pointer-events:auto; }
    .thankyou-box{ text-align:center; animation:pop 0.5s ease; }
    .thankyou-box h1{ font-size:42px; margin-bottom:12px; }
    .thankyou-box p{ font-size:16px; color:#555; }
    @keyframes pop{ from{ transform:translateY(20px); opacity:0; } to{ transform:translateY(0); opacity:1; } }
  </style>
</head>
<body>
<header class="fixed-header">
  <nav class="navbar">
    <div class="nav-logo">
        <a href="index.html"><img src="blicon.png" alt="1"></a>
    </div>

    <ul class="nav-menu">
        <a class="nav-item" href="newblazery.html">Blazery</a>
        <a class="nav-item" href="blazetv.html">BlazeTV</a>
        <a class="nav-item" href="bspbuy.html">BSP</a>
        <a class="nav-item" href="blazeosbuy.html">BlazeOS</a>

        <!-- <li class="nav-item" href="#">Store</li> -->
    </ul>
    </div>
</div>

  </nav>
  



</header>
<div class="checkout">

  <!-- LEFT -->
  <div class="checkout-left">
    <h2>Payment details</h2>

    <div class="form-group">
      <label for="name">Name</label>
      <input type="text" id="name">
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input type="email" id="email">
    </div>

    <div class="payment-methods">
      <h3>Payment method</h3>
      <div class="payment-option" data-method="KeyPay"><input type="radio" name="payment"> KeyPay</div>
      <div class="payment-option" data-method="Cash"><input type="radio" name="payment"> Cash</div>
      <div class="payment-option" data-method="Send Money"><input type="radio" name="payment"> Send Money</div>
    </div>

    <button type="button" class="pay-btn" id="payBtn">Pay</button>
  </div>

  <!-- RIGHT -->
  <div class="checkout-right">
    <h3>Your order</h3>
    <div id="orderItems"></div>
    <div class="order-total">
      <span>Total</span>
      <span id="orderTotal">$0.00</span>
    </div>
  </div>

</div>

<!-- Thank You -->
<div class="thankyou" id="thankYou">
  <div class="thankyou-box">
    <h1>Thank you!</h1>
    <p>Your order has been sent.<br>We’ll contact you by email.</p>
  </div>
</div>

<!-- EMAILJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  emailjs.init("N9sGN4BeNbB0oLKex");
</script>

<script>
const nameInput = document.getElementById("name");
const emailInput = document.getElementById("email");
const payBtn = document.getElementById("payBtn");
const paymentOptions = document.querySelectorAll(".payment-option");
const orderItems = document.getElementById("orderItems");
const orderTotal = document.getElementById("orderTotal");

let selectedPayment = null;
let cart = JSON.parse(localStorage.getItem("cart")) || [];

/* ===== EMAIL CHECK ===== */
function isValidEmail(email){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email); }

/* ===== PAYMENT SELECT ===== */
paymentOptions.forEach(opt=>{
  opt.addEventListener("click",()=>{
    paymentOptions.forEach(o=>o.classList.remove("active"));
    opt.classList.add("active");
    selectedPayment = opt.dataset.method;
    checkForm();
  });
});

/* ===== FORM CHECK ===== */
function checkForm(){
  if(nameInput.value.trim() && isValidEmail(emailInput.value) && selectedPayment && cart.length>0){
    payBtn.classList.add("active");
    payBtn.disabled=false;
  } else {
    payBtn.classList.remove("active");
    payBtn.disabled=true;
  }
}
nameInput.addEventListener("input",checkForm);
emailInput.addEventListener("input",checkForm);

/* ===== LOAD CART ===== */
function renderOrder(){
  let total=0;
  orderItems.innerHTML="";
  cart.forEach(item=>{
    total += item.price * (item.qty||1);
    const div=document.createElement("div");
    div.className="order-item";
    div.innerHTML=`<span>${item.title}</span><span>$${item.price.toFixed(2)}</span>`;
    orderItems.appendChild(div);
  });
  orderTotal.textContent="$"+total.toFixed(2);
}
renderOrder();

/* ===== SEND EMAIL ===== */
payBtn.addEventListener("click",(e)=>{
  e.preventDefault();
  if(!payBtn.classList.contains("active")) return;

  let itemsText="", total=0;
  cart.forEach(item=>{
    itemsText+=`- ${item.title} — $${item.price}\n`;
    total += item.price * (item.qty||1);
  });

  emailjs.send("service-blazery-poiuy","template_blazerystore1",{
    buyer_name: nameInput.value,
    buyer_email: emailInput.value,
    payment_method: selectedPayment,
    items: itemsText,
    total_price: total.toFixed(2)
  }).then(()=>{
    document.getElementById("thankYou").classList.add("active");
    localStorage.removeItem("cart");
    setTimeout(()=>{ window.location.href="index.html"; },2500);
  }).catch(err=>{ console.error("EmailJS error:",err); });
});
</script>

</body>
</html>
